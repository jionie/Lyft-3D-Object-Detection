# FrameQL
## Overview
FrameQL is a Declearative language that takes SQL-ish language to perform video analytic

## Structure of FrameQL language
A valid FrameQL program is a ***frameQLstatements***.
*frameQL statements* will consists of multiple ***frameQL statement***.
Each ***frameQLstatement*** can be either ***ddlStatement*** or ***dmlStatement***, *** transactionStatement***
Since FrameQL will be used mainly for video exploratory purpose, we will focus on ***dmlStatement***, specifically, ***selectStatement***.

A ***selectStatement*** will contain ***querySpecification*** that starts with **SELECT**.

Each ***querySepcification*** will take the form of of:
```
     SELECT ***selectSpec*** ***selectElements***
    ***fromClause***  ***errorTolerenceExpression*** ***confLevelExpression***
```

Where ***selectSpec*** can be empty or **DISTINCT**.

***selectElements*** is a list of attribltes from the table returned in ***fromClause***

***fromClause*** will take the form of
```
FROM tableSources WHERE (expressions)
```

***errorTolerenceExpression*** and ***confLevelExpression*** are expressions that are used to specify the fault tolerence of the backend and confidence level of the result. Together, these two expressions will have the form 
```
ERROR< 0.2 CONF> 0.9
```


The implementation of the Grammar is stored in frameQLParser.g4 and will be converted into a program that parses input with this grammar via ANTLR.

# Building Lexer and Parser of FrameQL grammar with ANTLR
ANTLR is a language tool that translate grammar for Lexer and Parser into program that can translate stream into tokens and tokens into sentences that follows the specified grammar. Users can then modify the generated code to let the parser perform actions based on the input.



## How to generate parser
REVIEWERS, PLEASE DON'T CALL ANTLR Since it will overwrite the codes we have written.
### Use ANTLR4 to construct the parser and the lexer
First, we need to translate our grammar into actual
```
antlr4 -Dlanguage=Python3 *.g4 -o ../build
```



## How to generate a Java program the views that parse tree
### Compile all java files in build
Go to ../build and execute:
```
antlr4 *.g4 -o ../javaBuild
```

###
## How to construct parse tree
in /javaBuild, run:
```
grun frameQL root -gui
```
frameQL is the parser generated by antlr and we will start from the **root** rule.

It will ask for inputs in the command prompt

Or we can provide input txt file via:
```
grun frameQL root -gui query.txt
```

In the end, grun will output the parse tree

## Problems
### No runtime environemnt
Just export CLASSPATH 	
```
export CLASSPATH=".:/usr/local/lib/antlr-4.7.1-complete.jar:$CLASSPATH"
```
